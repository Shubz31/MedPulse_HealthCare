;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3a63f263-ad8f-5f8e-04f9-c76a28f4ae11")}catch(e){}}();
module.exports = [
"[externals]/node:http [external] (node:http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:http", () => require("node:http"));

module.exports = mod;
}),
"[externals]/node:https [external] (node:https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:https", () => require("node:https"));

module.exports = mod;
}),
"[externals]/node:zlib [external] (node:zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:zlib", () => require("node:zlib"));

module.exports = mod;
}),
"[externals]/node:stream [external] (node:stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:stream", () => require("node:stream"));

module.exports = mod;
}),
"[externals]/node:buffer [external] (node:buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:buffer", () => require("node:buffer"));

module.exports = mod;
}),
"[externals]/node:util [external] (node:util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:util", () => require("node:util"));

module.exports = mod;
}),
"[externals]/node:url [external] (node:url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:url", () => require("node:url"));

module.exports = mod;
}),
"[externals]/node:net [external] (node:net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:net", () => require("node:net"));

module.exports = mod;
}),
"[externals]/node:fs [external] (node:fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:fs", () => require("node:fs"));

module.exports = mod;
}),
"[externals]/node:path [external] (node:path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:path", () => require("node:path"));

module.exports = mod;
}),
"[externals]/node:process [external] (node:process, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:process", () => require("node:process"));

module.exports = mod;
}),
"[externals]/node:stream/web [external] (node:stream/web, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:stream/web", () => require("node:stream/web"));

module.exports = mod;
}),
"[externals]/buffer [external] (buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}),
"[externals]/worker_threads [external] (worker_threads, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("worker_threads", () => require("worker_threads"));

module.exports = mod;
}),
"[externals]/node:assert [external] (node:assert, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:assert", () => require("node:assert"));

module.exports = mod;
}),
"[externals]/node:querystring [external] (node:querystring, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:querystring", () => require("node:querystring"));

module.exports = mod;
}),
"[externals]/node:diagnostics_channel [external] (node:diagnostics_channel, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:diagnostics_channel", () => require("node:diagnostics_channel"));

module.exports = mod;
}),
"[externals]/node:events [external] (node:events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:events", () => require("node:events"));

module.exports = mod;
}),
"[externals]/node:tls [external] (node:tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:tls", () => require("node:tls"));

module.exports = mod;
}),
"[externals]/node:perf_hooks [external] (node:perf_hooks, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:perf_hooks", () => require("node:perf_hooks"));

module.exports = mod;
}),
"[externals]/node:util/types [external] (node:util/types, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:util/types", () => require("node:util/types"));

module.exports = mod;
}),
"[externals]/node:os [external] (node:os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:os", () => require("node:os"));

module.exports = mod;
}),
"[externals]/node:async_hooks [external] (node:async_hooks, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:async_hooks", () => require("node:async_hooks"));

module.exports = mod;
}),
"[externals]/node:console [external] (node:console, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:console", () => require("node:console"));

module.exports = mod;
}),
"[externals]/string_decoder [external] (string_decoder, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("string_decoder", () => require("string_decoder"));

module.exports = mod;
}),
"[externals]/node:worker_threads [external] (node:worker_threads, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:worker_threads", () => require("node:worker_threads"));

module.exports = mod;
}),
"[externals]/node:crypto [external] (node:crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}),
"[externals]/node:http2 [external] (node:http2, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:http2", () => require("node:http2"));

module.exports = mod;
}),
"[project]/lib/appwrite.config.ts [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "API_KEY",
    ()=>API_KEY,
    "APPOINTMENT_COLLECTION_ID",
    ()=>APPOINTMENT_COLLECTION_ID,
    "BUCKET_ID",
    ()=>BUCKET_ID,
    "DATABASE_ID",
    ()=>DATABASE_ID,
    "ENDPOINT",
    ()=>ENDPOINT,
    "PATIENT_COLLECTION_ID",
    ()=>PATIENT_COLLECTION_ID,
    "PROJECT_ID",
    ()=>PROJECT_ID,
    "databases",
    ()=>databases,
    "messaging",
    ()=>messaging,
    "storage",
    ()=>storage,
    "users",
    ()=>users
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/index.mjs [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$client$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/client.mjs [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$databases$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/services/databases.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$storage$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/services/storage.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$users$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/services/users.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$messaging$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/services/messaging.mjs [app-rsc] (ecmascript)");
;
const client = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$client$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__["Client"]();
client.setEndpoint(process.env.ENDPOINT) // https://cloud.appwrite.io/v1
.setProject(process.env.PROJECT_ID).setKey(process.env.API_KEY);
const databases = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$databases$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Databases"](client);
const storage = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$storage$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Storage"](client);
const users = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$users$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Users"](client);
const messaging = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$services$2f$messaging$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Messaging"](client);
const ENDPOINT = process.env.ENDPOINT;
const PROJECT_ID = process.env.PROJECT_ID;
const API_KEY = process.env.API_KEY;
const DATABASE_ID = process.env.DATABASE_ID;
const PATIENT_COLLECTION_ID = process.env.PATIENTS_COLLECTION_ID;
const APPOINTMENT_COLLECTION_ID = process.env.APPOINTMENTS_COLLECTION_ID;
const BUCKET_ID = process.env.BUCKET_ID;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[project]/lib/actions/patient.action.ts [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"7f0bd326f22a3ca3fa52b739b5531e5e9d549bc8d3":"getUser","7f2defba45e37a5116e5fe13a1b3fa3756d0a8b018":"getPatient","7f9c5e53690ee00206b4f2d7e0bbf11c7a78c22fa2":"createUser","7fabf2cb804bebf4d2a2c0801921df5627a2738695":"registerPatient"},"",""] */ __turbopack_context__.s([
    "createUser",
    ()=>createUser,
    "getPatient",
    ()=>getPatient,
    "getUser",
    ()=>getUser,
    "registerPatient",
    ()=>registerPatient
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/index.mjs [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$id$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/id.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$query$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/query.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/appwrite.config.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$inputFile$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/inputFile.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
;
const parseStringify = (obj)=>{
    try {
        return JSON.parse(JSON.stringify(obj));
    } catch  {
        return obj;
    }
};
const createUser = async (user)=>{
    try {
        const newUser = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["users"].create(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$id$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ID"].unique(), user.email, user.phone, undefined, user.name);
        return parseStringify(newUser);
    } catch (error) {
        if (error?.code === 409) {
            const existing = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["users"].list([
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$query$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Query"].equal("email", [
                    user.email
                ])
            ]);
            if (existing?.users?.length) return parseStringify(existing.users[0]);
        }
        throw error;
    }
};
const getUser = async (userId)=>{
    if (!userId) {
        console.error("getUser called without userId");
        return null;
    }
    try {
        const user = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["users"].get(userId);
        return parseStringify(user);
    } catch (error) {
        console.log(" getUser ERROR:", error);
        return null;
    }
};
const getPatient = async (userId)=>{
    if (!userId) {
        console.error("getPatient called without userId");
        return null;
    }
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"] || !__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["PATIENT_COLLECTION_ID"]) {
        console.error("Database configuration is missing");
        return null;
    }
    try {
        const patients = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["databases"].listDocuments(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["PATIENT_COLLECTION_ID"], [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$query$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Query"].equal("userId", [
                userId
            ])
        ]);
        if (!patients || patients.documents.length === 0) return null;
        return parseStringify(patients.documents[0]);
    } catch (error) {
        console.log(" getPatient ERROR:", error);
        return null;
    }
};
const registerPatient = async ({ identificationDocument, ...patient })=>{
    try {
        let uploadedFile = null;
        if (identificationDocument instanceof FormData) {
            const blob = identificationDocument.get("blobFile");
            const fileName = identificationDocument.get("fileName");
            if (blob && fileName && __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["BUCKET_ID"]) {
                const buffer = Buffer.from(await blob.arrayBuffer());
                const inputFile = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$inputFile$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["InputFile"].fromBuffer(buffer, fileName);
                uploadedFile = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["storage"].createFile(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["BUCKET_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$id$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ID"].unique(), inputFile);
            }
        }
        const newPatient = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["databases"].createDocument(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["PATIENT_COLLECTION_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$id$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ID"].unique(), {
            ...patient,
            userId: patient.userId,
            identificationDocumentId: uploadedFile?.$id || null,
            identificationDocumentUrl: uploadedFile ? `${__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ENDPOINT"]}/storage/buckets/${__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["BUCKET_ID"]}/files/${uploadedFile.$id}/view?project=${__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["PROJECT_ID"]}` : null
        });
        return parseStringify(newPatient);
    } catch (error) {
        console.log("registerPatient ERROR:", error);
        return null;
    }
};
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    createUser,
    getUser,
    getPatient,
    registerPatient
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(createUser, "7f9c5e53690ee00206b4f2d7e0bbf11c7a78c22fa2", null);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(getUser, "7f0bd326f22a3ca3fa52b739b5531e5e9d549bc8d3", null);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(getPatient, "7f2defba45e37a5116e5fe13a1b3fa3756d0a8b018", null);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(registerPatient, "7fabf2cb804bebf4d2a2c0801921df5627a2738695", null);
}),
"[project]/lib/actions/appointment.action.ts [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/* __next_internal_action_entry_do_not_use__ [{"7f0483f907b6b7b1827b1208467c6a471908db9622":"sendSMSNotification","7f12d9382c77db85eb040961233a41693076baf1a3":"getAppointment","7f692acfa1cf0bf33e68f3731cd025aa8a120e0a86":"getRecentAppointmentList","7f83832d45f20388233bfd9d3f05a4a3b2432bc5f0":"updateAppointment","7fe7a95cf35bd2bb25bf919763ddf3ddaf6c525035":"createAppointment"},"",""] */ __turbopack_context__.s([
    "createAppointment",
    ()=>createAppointment,
    "getAppointment",
    ()=>getAppointment,
    "getRecentAppointmentList",
    ()=>getRecentAppointmentList,
    "sendSMSNotification",
    ()=>sendSMSNotification,
    "updateAppointment",
    ()=>updateAppointment
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/index.mjs [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$id$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/id.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$query$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/node-appwrite/dist/query.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/appwrite.config.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/utils.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/cache.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
;
;
const createAppointment = async (appointment)=>{
    try {
        const newAppointment = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["databases"].createDocument(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["APPOINTMENT_COLLECTION_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$id$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ID"].unique(), appointment);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["parseStringify"])(newAppointment);
    } catch (error) {
        console.log(error);
    }
};
const getAppointment = async (appointmentId)=>{
    try {
        const appointment = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["databases"].getDocument(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["APPOINTMENT_COLLECTION_ID"], appointmentId);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["parseStringify"])(appointment);
    } catch (error) {
        console.log(error);
    }
};
const getRecentAppointmentList = async ()=>{
    try {
        const appointments = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["databases"].listDocuments(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["APPOINTMENT_COLLECTION_ID"], [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$query$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Query"].orderDesc("$createdAt")
        ]);
        const enrichedAppointments = await Promise.all(appointments.documents.map(async (appointment)=>{
            try {
                const patient = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["databases"].getDocument(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["PATIENT_COLLECTION_ID"], appointment.patient);
                return {
                    ...appointment,
                    patient
                };
            } catch (err) {
                console.log("Failed to fetch patient:", err);
                return appointment;
            }
        }));
        const initialCounts = {
            scheduledCount: 0,
            pendingCount: 0,
            cancelledCount: 0
        };
        enrichedAppointments.forEach((a)=>{
            if (a.status === "scheduled") initialCounts.scheduledCount++;
            if (a.status === "pending") initialCounts.pendingCount++;
            if (a.status === "cancelled") initialCounts.cancelledCount++;
        });
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["parseStringify"])({
            totalCount: appointments.total,
            ...initialCounts,
            documents: enrichedAppointments
        });
    } catch (error) {
        console.log(error);
    }
};
const updateAppointment = async ({ appointmentId, userId, appointment, type })=>{
    try {
        const updatedAppointment = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["databases"].updateDocument(__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["DATABASE_ID"], __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["APPOINTMENT_COLLECTION_ID"], appointmentId, appointment);
        if (!updatedAppointment) {
            throw new Error("Appointment not found");
        }
        const smsMessage = `
      Hi, it's MedPulse.
      ${type === 'schedule' ? `Your appointment has been scheduled for ${(0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["formatDateTime"])(appointment.schedule).dateTime} 
        with Dr. ${appointment.primaryPhysician}.` : `We regret to inform you that your appointment has been cancelled for the following reason: 
        ${appointment.cancellationReason}`}
      `;
        await sendSMSNotification(userId, smsMessage);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$cache$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["revalidatePath"])("/admin");
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["parseStringify"])(updatedAppointment);
    } catch (error) {
        console.log(error);
    }
};
const sendSMSNotification = async (userId, content)=>{
    try {
        const message = await __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$appwrite$2e$config$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["messaging"].createSms(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$node$2d$appwrite$2f$dist$2f$id$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ID"].unique(), content, [], [
            userId
        ]);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["parseStringify"])(message);
    } catch (error) {
        console.log(error);
    }
};
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    createAppointment,
    getAppointment,
    getRecentAppointmentList,
    updateAppointment,
    sendSMSNotification
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(createAppointment, "7fe7a95cf35bd2bb25bf919763ddf3ddaf6c525035", null);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(getAppointment, "7f12d9382c77db85eb040961233a41693076baf1a3", null);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(getRecentAppointmentList, "7f692acfa1cf0bf33e68f3731cd025aa8a120e0a86", null);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(updateAppointment, "7f83832d45f20388233bfd9d3f05a4a3b2432bc5f0", null);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(sendSMSNotification, "7f0483f907b6b7b1827b1208467c6a471908db9622", null);
}),
"[project]/.next-internal/server/app/patients/[userId]/new-appointment/page/actions.js { ACTIONS_MODULE0 => \"[project]/lib/actions/patient.action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE1 => \"[project]/lib/actions/appointment.action.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$patient$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/actions/patient.action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$appointment$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/actions/appointment.action.ts [app-rsc] (ecmascript)");
;
;
;
;
;
;
;
}),
"[project]/.next-internal/server/app/patients/[userId]/new-appointment/page/actions.js { ACTIONS_MODULE0 => \"[project]/lib/actions/patient.action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE1 => \"[project]/lib/actions/appointment.action.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "7f0bd326f22a3ca3fa52b739b5531e5e9d549bc8d3",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$patient$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getUser"],
    "7f2defba45e37a5116e5fe13a1b3fa3756d0a8b018",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$patient$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["getPatient"],
    "7f83832d45f20388233bfd9d3f05a4a3b2432bc5f0",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$appointment$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["updateAppointment"],
    "7f9c5e53690ee00206b4f2d7e0bbf11c7a78c22fa2",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$patient$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["createUser"],
    "7fabf2cb804bebf4d2a2c0801921df5627a2738695",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$patient$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerPatient"],
    "7fe7a95cf35bd2bb25bf919763ddf3ddaf6c525035",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$appointment$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["createAppointment"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f$patients$2f5b$userId$5d2f$new$2d$appointment$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$lib$2f$actions$2f$patient$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$lib$2f$actions$2f$appointment$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i('[project]/.next-internal/server/app/patients/[userId]/new-appointment/page/actions.js { ACTIONS_MODULE0 => "[project]/lib/actions/patient.action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE1 => "[project]/lib/actions/appointment.action.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <locals>');
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$patient$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/actions/patient.action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$actions$2f$appointment$2e$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/actions/appointment.action.ts [app-rsc] (ecmascript)");
}),
];

//# debugId=3a63f263-ad8f-5f8e-04f9-c76a28f4ae11
//# sourceMappingURL=%5Broot-of-the-server%5D__9ad2449b._.js.map